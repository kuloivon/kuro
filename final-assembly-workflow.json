{
  "name": "è®ºæ–‡æœ€ç»ˆæ•´åˆå·¥ä½œæµ - å…¨æ–‡ç»„è£…ä¸ç”Ÿæˆ",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "/final-assembly",
        "options": {}
      },
      "id": "f1g2h3i4-j5k6-7890-abcd-ef1234567890",
      "name": "æœ€ç»ˆæ•´åˆè§¦å‘å™¨",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [100, 100],
      "webhookId": "final-assembly"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "llmApiUrl",
              "value": "https://api.openai.com/v1/chat/completions"
            },
            {
              "name": "llmModel",
              "value": "gpt-4"
            },
            {
              "name": "assemblyModel",
              "value": "gpt-4-turbo"
            },
            {
              "name": "storageApiUrl",
              "value": "http://localhost:3000/api/content-storage"
            },
            {
              "name": "outputFormatUrl",
              "value": "http://localhost:3000/api/format-output"
            },
            {
              "name": "minCompletionRate",
              "value": "0.8"
            }
          ]
        }
      },
      "id": "g2h3i4j5-k6l7-8901-bcde-f23456789012",
      "name": "ç¯å¢ƒé…ç½®",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [100, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "={{ $json.action }}",
            "operation": "equal",
            "rightValue": "add_approved_content"
          }
        }
      },
      "id": "h3i4j5k6-l7m8-9012-cdef-345678901234",
      "name": "åˆ¤æ–­æ“ä½œç±»å‹",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [300, 100]
    },
    {
      "parameters": {
        "url": "{{ $('ç¯å¢ƒé…ç½®').item.json.storageApiUrl }}",
        "method": "POST",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "action",
              "value": "store_content"
            },
            {
              "name": "content",
              "value": "={{ $json.approvedContent }}"
            }
          ]
        }
      },
      "id": "i4j5k6l7-m8n9-0123-def0-456789012345",
      "name": "å­˜å‚¨å·²æ‰¹å‡†å†…å®¹",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [500, 80]
    },
    {
      "parameters": {
        "url": "{{ $('ç¯å¢ƒé…ç½®').item.json.storageApiUrl }}",
        "method": "GET",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "action",
              "value": "get_all_content"
            },
            {
              "name": "include_stats",
              "value": "true"
            }
          ]
        }
      },
      "id": "j5k6l7m8-n9o0-1234-ef01-567890123456",
      "name": "æ£€æŸ¥å†…å®¹å®Œæ•´æ€§",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [700, 80]
    },
    {
      "parameters": {
        "functionCode": "// æ£€æŸ¥è®ºæ–‡å®Œæ•´æ€§å¹¶å†³å®šæ˜¯å¦å¯ä»¥å¼€å§‹æ•´åˆ\nfor (const item of $input.all()) {\n  const storageResponse = item.json;\n  const allContents = storageResponse.contents || [];\n  const stats = storageResponse.stats || {};\n  \n  // æŒ‰ç« èŠ‚å’Œå°èŠ‚æ’åº\n  const sortedContents = allContents.sort((a, b) => {\n    if (a.chapter !== b.chapter) return a.chapter - b.chapter;\n    return a.section.localeCompare(b.section);\n  });\n  \n  // ç»Ÿè®¡å®Œæˆæƒ…å†µ\n  const expectedChapters = stats.expectedChapters || 6; // é»˜è®¤6ç« \n  const completedChapters = new Set(allContents.map(c => c.chapter)).size;\n  const completionRate = completedChapters / expectedChapters;\n  \n  const minCompletionRate = parseFloat($('ç¯å¢ƒé…ç½®').item.json.minCompletionRate);\n  const readyForAssembly = completionRate >= minCompletionRate;\n  \n  // æ£€æŸ¥ç« èŠ‚è¿ç»­æ€§\n  const chapterNumbers = [...new Set(allContents.map(c => c.chapter))].sort((a, b) => a - b);\n  const hasGaps = chapterNumbers.some((num, index) => {\n    return index > 0 && num !== chapterNumbers[index - 1] + 1;\n  });\n  \n  // åˆ†æè´¨é‡åˆ†å¸ƒ\n  const qualityStats = {\n    averageScore: allContents.reduce((sum, c) => sum + c.finalQualityScore, 0) / allContents.length,\n    minScore: Math.min(...allContents.map(c => c.finalQualityScore)),\n    maxScore: Math.max(...allContents.map(c => c.finalQualityScore)),\n    excellentCount: allContents.filter(c => c.finalQualityScore >= 9).length,\n    goodCount: allContents.filter(c => c.finalQualityScore >= 7).length,\n    needsAttentionCount: allContents.filter(c => c.finalQualityScore < 6).length\n  };\n  \n  const assemblyStatus = {\n    readyForAssembly: readyForAssembly && !hasGaps,\n    completionRate: completionRate,\n    completedChapters: completedChapters,\n    expectedChapters: expectedChapters,\n    totalSections: allContents.length,\n    hasGaps: hasGaps,\n    missingChapters: hasGaps ? [] : [], // è¿™é‡Œå¯ä»¥è¯¦ç»†è®¡ç®—ç¼ºå¤±ç« èŠ‚\n    qualityStats: qualityStats,\n    contents: sortedContents,\n    statusMessage: readyForAssembly ? \n      'âœ… å†…å®¹å®Œæ•´ï¼Œå¯ä»¥å¼€å§‹æ•´åˆ' : \n      `â³ å®Œæˆåº¦ ${(completionRate * 100).toFixed(1)}%ï¼Œéœ€è¦ç­‰å¾…æ›´å¤šå†…å®¹`,\n    nextAction: readyForAssembly ? 'start_assembly' : 'wait_for_content'\n  };\n  \n  item.json = assemblyStatus;\n}\n\nreturn $input.all();"
      },
      "id": "k6l7m8n9-o0p1-2345-f012-678901234567",
      "name": "è¯„ä¼°æ•´åˆå‡†å¤‡åº¦",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 80]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "={{ $json.readyForAssembly }}",
            "operation": "equal",
            "rightValue": "true"
          }
        }
      },
      "id": "l7m8n9o0-p1q2-3456-0123-789012345678",
      "name": "æ£€æŸ¥æ˜¯å¦å‡†å¤‡å°±ç»ª",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1100, 80]
    },
    {
      "parameters": {
        "url": "{{ $('ç¯å¢ƒé…ç½®').item.json.llmApiUrl }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "method": "POST",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "{{ $('ç¯å¢ƒé…ç½®').item.json.assemblyModel }}"
            },
            {
              "name": "messages",
              "value": "=[{\"role\": \"system\", \"content\": \"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å­¦æœ¯è®ºæ–‡ç¼–è¾‘å’Œæ•´åˆä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†å¤šä¸ªå·²å®¡æ ¸çš„ç« èŠ‚å†…å®¹æ•´åˆæˆä¸€ç¯‡å®Œæ•´ã€è¿è´¯çš„å­¦æœ¯è®ºæ–‡ã€‚\\n\\næ•´åˆè¦æ±‚ï¼š\\n1. **å…¨å±€ä¸€è‡´æ€§**ï¼šç¡®ä¿å„ç« èŠ‚ä¹‹é—´é€»è¾‘è¿è´¯ï¼Œæœ¯è¯­ç»Ÿä¸€\\n2. **ç»“æ„å®Œæ•´æ€§**ï¼šæ£€æŸ¥è®ºæ–‡æ•´ä½“ç»“æ„çš„åˆç†æ€§\\n3. **è¿‡æ¸¡ä¼˜åŒ–**ï¼šåœ¨ç« èŠ‚é—´æ·»åŠ é€‚å½“çš„è¿‡æ¸¡å’Œè¿æ¥\\n4. **æ ¼å¼ç»Ÿä¸€**ï¼šç»Ÿä¸€å¼•ç”¨æ ¼å¼ã€å›¾è¡¨ç¼–å·ç­‰\\n5. **è¯­è¨€æ¶¦è‰²**ï¼šä¿æŒå…¨æ–‡è¯­è¨€é£æ ¼çš„ä¸€è‡´æ€§\\n6. **è´¨é‡æå‡**ï¼šè¯†åˆ«å¹¶æ”¹è¿›è–„å¼±ç¯èŠ‚\\n\\nè¾“å‡ºæ ¼å¼ä¸ºJSONï¼š\\n{\\n  \\\"globalReview\\\": {\\n    \\\"consistencyScore\\\": è¯„åˆ†(1-10),\\n    \\\"structureScore\\\": ç»“æ„è¯„åˆ†(1-10),\\n    \\\"cohesionScore\\\": è¿è´¯æ€§è¯„åˆ†(1-10),\\n    \\\"overallQuality\\\": æ€»ä½“è´¨é‡è¯„åˆ†(1-10)\\n  },\\n  \\\"identifiedIssues\\\": [\\n    {\\n      \\\"type\\\": \\\"é—®é¢˜ç±»å‹\\\",\\n      \\\"location\\\": \\\"ä½ç½®\\\",\\n      \\\"description\\\": \\\"é—®é¢˜æè¿°\\\",\\n      \\\"suggestion\\\": \\\"æ”¹è¿›å»ºè®®\\\"\\n    }\\n  ],\\n  \\\"improvementPlan\\\": [\\n    {\\n      \\\"priority\\\": \\\"ä¼˜å…ˆçº§(high/medium/low)\\\",\\n      \\\"action\\\": \\\"æ”¹è¿›è¡ŒåŠ¨\\\",\\n      \\\"target\\\": \\\"ç›®æ ‡ç« èŠ‚æˆ–éƒ¨åˆ†\\\"\\n    }\\n  ],\\n  \\\"assemblyReady\\\": true/false,\\n  \\\"recommendedActions\\\": [\\\"å»ºè®®è¡ŒåŠ¨1\\\", \\\"å»ºè®®è¡ŒåŠ¨2\\\"]\\n}\"}, {\"role\": \"user\", \"content\": \"è¯·å¯¹ä»¥ä¸‹è®ºæ–‡ç« èŠ‚è¿›è¡Œå…¨å±€å®¡æ ¸å’Œæ•´åˆå‡†å¤‡ï¼š\\n\\n## è®ºæ–‡ç»Ÿè®¡\\n**å®Œæˆåº¦ï¼š** {{ ($json.completionRate * 100).toFixed(1) }}%\\n**ç« èŠ‚æ•°ï¼š** {{ $json.completedChapters }}/{{ $json.expectedChapters }}\\n**å°èŠ‚æ•°ï¼š** {{ $json.totalSections }}\\n**å¹³å‡è´¨é‡ï¼š** {{ $json.qualityStats.averageScore.toFixed(1) }}/10\\n\\n## å„ç« èŠ‚å†…å®¹\\n{{ $json.contents.map((content, index) => `### ç¬¬${content.chapter}ç«  ${content.section} ${content.title}\\n**è´¨é‡è¯„åˆ†ï¼š** ${content.finalQualityScore}/10\\n**å­—æ•°ï¼š** ${content.wordCount}\\n**ä¿®è®¢è½®æ¬¡ï¼š** ${content.revisionCycles}\\n\\n${content.content.substring(0, 500)}...\\n\\n---\\n`).join('') }}\\n\\nè¯·è¿›è¡Œå…¨å±€ä¸€è‡´æ€§å®¡æ ¸å¹¶æä¾›æ•´åˆå»ºè®®ã€‚\"}]"
            },
            {
              "name": "temperature",
              "value": "0.3"
            },
            {
              "name": "max_tokens",
              "value": "2500"
            }
          ]
        }
      },
      "id": "m8n9o0p1-q2r3-4567-1234-890123456789",
      "name": "LLMå…¨å±€ä¸€è‡´æ€§å®¡æ ¸",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [1300, 60]
    },
    {
      "parameters": {
        "functionCode": "// å¤„ç†å…¨å±€å®¡æ ¸ç»“æœå¹¶ç”Ÿæˆæ•´åˆç­–ç•¥\nfor (const item of $input.all()) {\n  try {\n    const reviewResponse = JSON.parse(item.json.choices[0].message.content);\n    const assemblyData = $('è¯„ä¼°æ•´åˆå‡†å¤‡åº¦').first().json;\n    \n    // åˆ†æå®¡æ ¸ç»“æœ\n    const globalQuality = {\n      consistency: reviewResponse.globalReview.consistencyScore,\n      structure: reviewResponse.globalReview.structureScore,\n      cohesion: reviewResponse.globalReview.cohesionScore,\n      overall: reviewResponse.globalReview.overallQuality,\n      average: (reviewResponse.globalReview.consistencyScore + \n               reviewResponse.globalReview.structureScore + \n               reviewResponse.globalReview.cohesionScore + \n               reviewResponse.globalReview.overallQuality) / 4\n    };\n    \n    // åˆ†ç±»é—®é¢˜\n    const criticalIssues = reviewResponse.identifiedIssues.filter(issue => \n      issue.type.includes('ä¸€è‡´æ€§') || issue.type.includes('é€»è¾‘')\n    );\n    \n    const formatIssues = reviewResponse.identifiedIssues.filter(issue => \n      issue.type.includes('æ ¼å¼') || issue.type.includes('å¼•ç”¨')\n    );\n    \n    const styleIssues = reviewResponse.identifiedIssues.filter(issue => \n      issue.type.includes('è¯­è¨€') || issue.type.includes('é£æ ¼')\n    );\n    \n    // åˆ¶å®šæ•´åˆç­–ç•¥\n    const assemblyStrategy = {\n      approachType: globalQuality.average >= 8 ? 'direct_assembly' : \n                   globalQuality.average >= 6 ? 'moderate_revision' : 'comprehensive_revision',\n      \n      priorityActions: reviewResponse.improvementPlan\n        .filter(plan => plan.priority === 'high')\n        .map(plan => plan.action),\n      \n      processingSteps: [\n        'content_merging',\n        criticalIssues.length > 0 ? 'critical_issue_resolution' : null,\n        'format_standardization', \n        'style_harmonization',\n        'final_review'\n      ].filter(Boolean),\n      \n      estimatedTime: globalQuality.average >= 8 ? '10-15åˆ†é’Ÿ' : \n                    globalQuality.average >= 6 ? '20-30åˆ†é’Ÿ' : '40-60åˆ†é’Ÿ'\n    };\n    \n    const globalReviewResult = {\n      timestamp: new Date().toISOString(),\n      qualityAssessment: globalQuality,\n      issueAnalysis: {\n        totalIssues: reviewResponse.identifiedIssues.length,\n        criticalIssues: criticalIssues.length,\n        formatIssues: formatIssues.length,\n        styleIssues: styleIssues.length,\n        issueDetails: reviewResponse.identifiedIssues\n      },\n      assemblyStrategy: assemblyStrategy,\n      assemblyReady: reviewResponse.assemblyReady && globalQuality.average >= 6,\n      recommendedActions: reviewResponse.recommendedActions,\n      contents: assemblyData.contents,\n      processingStage: 'global_review_completed',\n      nextStage: reviewResponse.assemblyReady ? 'paper_assembly' : 'issue_resolution'\n    };\n    \n    item.json = globalReviewResult;\n    \n  } catch (error) {\n    item.json = {\n      error: 'å…¨å±€å®¡æ ¸ç»“æœå¤„ç†å¤±è´¥',\n      errorMessage: error.message,\n      originalResponse: item.json,\n      processingStage: 'global_review_failed'\n    };\n  }\n}\n\nreturn $input.all();"
      },
      "id": "n9o0p1q2-r3s4-5678-2345-901234567890",
      "name": "å…¨å±€å®¡æ ¸ç»“æœå¤„ç†",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1500, 60]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "={{ $json.assemblyReady }}",
            "operation": "equal",
            "rightValue": "true"
          }
        }
      },
      "id": "o0p1q2r3-s4t5-6789-3456-012345678901",
      "name": "æ£€æŸ¥æ˜¯å¦å¯ä»¥æ•´åˆ",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1700, 60]
    },
    {
      "parameters": {
        "functionCode": "// å¼€å§‹è®ºæ–‡æ•´åˆè¿‡ç¨‹\nfor (const item of $input.all()) {\n  const reviewResult = item.json;\n  const contents = reviewResult.contents;\n  \n  // æ„å»ºå®Œæ•´è®ºæ–‡ç»“æ„\n  let fullPaper = '';\n  \n  // 1. æ ‡é¢˜å’Œæ‘˜è¦ï¼ˆå¦‚æœæœ‰å¤§çº²ä¿¡æ¯ï¼‰\n  fullPaper += `# è®ºæ–‡æ ‡é¢˜\\n\\n`;\n  fullPaper += `## æ‘˜è¦\\n\\n[æ­¤å¤„éœ€è¦æ ¹æ®å¤§çº²ä¿¡æ¯ç”Ÿæˆæ‘˜è¦]\\n\\n`;\n  fullPaper += `## å…³é”®è¯\\n\\n[å…³é”®è¯åˆ—è¡¨]\\n\\n`;\n  \n  // 2. ç›®å½•\n  fullPaper += `## ç›®å½•\\n\\n`;\n  const chapters = [...new Set(contents.map(c => c.chapter))].sort((a, b) => a - b);\n  chapters.forEach(chapterNum => {\n    const chapterContents = contents.filter(c => c.chapter === chapterNum);\n    if (chapterContents.length > 0) {\n      fullPaper += `${chapterNum}. ç¬¬${chapterNum}ç« \\n`;\n      chapterContents.forEach(content => {\n        fullPaper += `  ${content.section} ${content.title}\\n`;\n      });\n    }\n  });\n  fullPaper += `\\n\\n`;\n  \n  // 3. æ­£æ–‡å†…å®¹\n  let currentChapter = 0;\n  contents.forEach(content => {\n    if (content.chapter !== currentChapter) {\n      currentChapter = content.chapter;\n      fullPaper += `\\n\\n# ç¬¬${currentChapter}ç« \\n\\n`;\n    }\n    \n    fullPaper += `## ${content.section} ${content.title}\\n\\n`;\n    fullPaper += content.content;\n    fullPaper += `\\n\\n`;\n  });\n  \n  // 4. å‚è€ƒæ–‡çŒ®\n  fullPaper += `\\n\\n# å‚è€ƒæ–‡çŒ®\\n\\n`;\n  fullPaper += `[æ­¤å¤„å°†æ±‡æ€»æ‰€æœ‰ç« èŠ‚çš„å‚è€ƒæ–‡çŒ®]\\n\\n`;\n  \n  // 5. é™„å½•ï¼ˆå¦‚éœ€è¦ï¼‰\n  fullPaper += `\\n\\n# é™„å½•\\n\\n`;\n  fullPaper += `[ç›¸å…³é™„å½•å†…å®¹]\\n\\n`;\n  \n  // ç»Ÿè®¡ä¿¡æ¯\n  const totalWords = contents.reduce((sum, c) => sum + c.wordCount, 0);\n  const averageQuality = contents.reduce((sum, c) => sum + c.finalQualityScore, 0) / contents.length;\n  \n  const assembledPaper = {\n    title: 'è‡ªåŠ¨ç”Ÿæˆçš„å­¦æœ¯è®ºæ–‡',\n    content: fullPaper,\n    metadata: {\n      totalWords: totalWords,\n      totalChapters: chapters.length,\n      totalSections: contents.length,\n      averageQuality: averageQuality,\n      completionDate: new Date().toISOString(),\n      assemblyStrategy: reviewResult.assemblyStrategy.approachType\n    },\n    qualityMetrics: {\n      globalConsistency: reviewResult.qualityAssessment.consistency,\n      structuralIntegrity: reviewResult.qualityAssessment.structure,\n      contentCohesion: reviewResult.qualityAssessment.cohesion,\n      overallQuality: reviewResult.qualityAssessment.overall\n    },\n    processingLog: {\n      assembledAt: new Date().toISOString(),\n      processingSteps: reviewResult.assemblyStrategy.processingSteps,\n      resolvedIssues: reviewResult.issueAnalysis.totalIssues,\n      finalStatus: 'assembly_completed'\n    },\n    processingStage: 'paper_assembled',\n    nextStage: 'format_output'\n  };\n  \n  item.json = assembledPaper;\n}\n\nreturn $input.all();"
      },
      "id": "p1q2r3s4-t5u6-7890-4567-123456789012",
      "name": "æ‰§è¡Œè®ºæ–‡æ•´åˆ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1900, 40]
    },
    {
      "parameters": {
        "url": "{{ $('ç¯å¢ƒé…ç½®').item.json.outputFormatUrl }}",
        "method": "POST",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $json.content }}"
            },
            {
              "name": "metadata",
              "value": "={{ $json.metadata }}"
            },
            {
              "name": "formats",
              "value": "['markdown', 'pdf', 'docx']"
            }
          ]
        }
      },
      "id": "q2r3s4t5-u6v7-8901-5678-234567890123",
      "name": "ç”Ÿæˆå¤šæ ¼å¼è¾“å‡º",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [2100, 40]
    },
    {
      "parameters": {
        "message": "â³ ç­‰å¾…æ›´å¤šå†…å®¹å®Œæˆ\\n\\n**å½“å‰è¿›åº¦ï¼š** {{ ($json.completionRate * 100).toFixed(1) }}%\\n**å·²å®Œæˆç« èŠ‚ï¼š** {{ $json.completedChapters }}/{{ $json.expectedChapters }}\\n**å·²å®Œæˆå°èŠ‚ï¼š** {{ $json.totalSections }}ä¸ª\\n**å¹³å‡è´¨é‡ï¼š** {{ $json.qualityStats.averageScore.toFixed(1) }}/10\\n\\n{{ $json.statusMessage }}",
        "additionalFields": {
          "title": "è®ºæ–‡æ•´åˆçŠ¶æ€"
        }
      },
      "id": "r3s4t5u6-v7w8-9012-6789-345678901234",
      "name": "ç­‰å¾…çŠ¶æ€é€šçŸ¥",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [1100, 200]
    },
    {
      "parameters": {
        "url": "{{ $('ç¯å¢ƒé…ç½®').item.json.storageApiUrl }}",
        "method": "GET",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "action",
              "value": "get_completion_status"
            }
          ]
        }
      },
      "id": "s4t5u6v7-w8x9-0123-7890-456789012345",
      "name": "è·å–å®ŒæˆçŠ¶æ€",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [500, 200]
    },
    {
      "parameters": {
        "message": "âš ï¸ å…¨å±€è´¨é‡æ£€æŸ¥æœªé€šè¿‡\\n\\n**æ€»ä½“è¯„åˆ†ï¼š** {{ $json.qualityAssessment.overall }}/10\\n**å‘ç°é—®é¢˜ï¼š** {{ $json.issueAnalysis.totalIssues }}ä¸ª\\n**å…³é”®é—®é¢˜ï¼š** {{ $json.issueAnalysis.criticalIssues }}ä¸ª\\n\\n**å»ºè®®è¡ŒåŠ¨ï¼š**\\n{{ $json.recommendedActions.map((action, index) => `${index + 1}. ${action}`).join('\\n') }}\\n\\néœ€è¦è§£å†³é—®é¢˜åé‡æ–°æ•´åˆã€‚",
        "additionalFields": {
          "title": "æ•´åˆè´¨é‡æ£€æŸ¥å¤±è´¥",
          "color": "#FF9500"
        }
      },
      "id": "t5u6v7w8-x9y0-1234-8901-567890123456",
      "name": "è´¨é‡é—®é¢˜é€šçŸ¥",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [1700, 200]
    },
    {
      "parameters": {
        "message": "ğŸ‰ è®ºæ–‡æ•´åˆå®Œæˆï¼\\n\\n**ğŸ“Š è®ºæ–‡ç»Ÿè®¡**\\n- **æ€»å­—æ•°ï¼š** {{ $json.metadata.totalWords }} å­—\\n- **ç« èŠ‚æ•°ï¼š** {{ $json.metadata.totalChapters }} ç« \\n- **å°èŠ‚æ•°ï¼š** {{ $json.metadata.totalSections }} ä¸ª\\n- **å¹³å‡è´¨é‡ï¼š** {{ $json.metadata.averageQuality.toFixed(1) }}/10\\n\\n**ğŸ¯ è´¨é‡æŒ‡æ ‡**\\n- **å…¨å±€ä¸€è‡´æ€§ï¼š** {{ $json.qualityMetrics.globalConsistency }}/10\\n- **ç»“æ„å®Œæ•´æ€§ï¼š** {{ $json.qualityMetrics.structuralIntegrity }}/10\\n- **å†…å®¹è¿è´¯æ€§ï¼š** {{ $json.qualityMetrics.contentCohesion }}/10\\n- **æ€»ä½“è´¨é‡ï¼š** {{ $json.qualityMetrics.overallQuality }}/10\\n\\n**âœ… å·²ç”Ÿæˆæ ¼å¼ï¼š** Markdown, PDF, DOCX\\n**ğŸ“… å®Œæˆæ—¶é—´ï¼š** {{ $json.metadata.completionDate }}",
        "additionalFields": {
          "title": "ğŸ“ è®ºæ–‡è‡ªåŠ¨ç”Ÿæˆå®Œæˆ",
          "color": "#00C851"
        }
      },
      "id": "u6v7w8x9-y0z1-2345-9012-678901234567",
      "name": "å®Œæˆé€šçŸ¥",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [2300, 40]
    }
  ],
  "connections": {
    "æœ€ç»ˆæ•´åˆè§¦å‘å™¨": {
      "main": [
        [
          {
            "node": "åˆ¤æ–­æ“ä½œç±»å‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–­æ“ä½œç±»å‹": {
      "main": [
        [
          {
            "node": "å­˜å‚¨å·²æ‰¹å‡†å†…å®¹",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "è·å–å®ŒæˆçŠ¶æ€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å­˜å‚¨å·²æ‰¹å‡†å†…å®¹": {
      "main": [
        [
          {
            "node": "æ£€æŸ¥å†…å®¹å®Œæ•´æ€§",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ£€æŸ¥å†…å®¹å®Œæ•´æ€§": {
      "main": [
        [
          {
            "node": "è¯„ä¼°æ•´åˆå‡†å¤‡åº¦",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è¯„ä¼°æ•´åˆå‡†å¤‡åº¦": {
      "main": [
        [
          {
            "node": "æ£€æŸ¥æ˜¯å¦å‡†å¤‡å°±ç»ª",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ£€æŸ¥æ˜¯å¦å‡†å¤‡å°±ç»ª": {
      "main": [
        [
          {
            "node": "LLMå…¨å±€ä¸€è‡´æ€§å®¡æ ¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç­‰å¾…çŠ¶æ€é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLMå…¨å±€ä¸€è‡´æ€§å®¡æ ¸": {
      "main": [
        [
          {
            "node": "å…¨å±€å®¡æ ¸ç»“æœå¤„ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å…¨å±€å®¡æ ¸ç»“æœå¤„ç†": {
      "main": [
        [
          {
            "node": "æ£€æŸ¥æ˜¯å¦å¯ä»¥æ•´åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ£€æŸ¥æ˜¯å¦å¯ä»¥æ•´åˆ": {
      "main": [
        [
          {
            "node": "æ‰§è¡Œè®ºæ–‡æ•´åˆ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "è´¨é‡é—®é¢˜é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰§è¡Œè®ºæ–‡æ•´åˆ": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆå¤šæ ¼å¼è¾“å‡º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå¤šæ ¼å¼è¾“å‡º": {
      "main": [
        [
          {
            "node": "å®Œæˆé€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–å®ŒæˆçŠ¶æ€": {
      "main": [
        [
          {
            "node": "è¯„ä¼°æ•´åˆå‡†å¤‡åº¦",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "final-assembly-v1.0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "description": "è®ºæ–‡æœ€ç»ˆæ•´åˆå·¥ä½œæµï¼šæ”¶é›†å·²æ‰¹å‡†çš„ç« èŠ‚å†…å®¹ï¼Œè¿›è¡Œå…¨å±€ä¸€è‡´æ€§æ£€æŸ¥ï¼Œæ•´åˆæˆå®Œæ•´è®ºæ–‡å¹¶ç”Ÿæˆå¤šç§æ ¼å¼è¾“å‡ºã€‚æ”¯æŒè´¨é‡æ§åˆ¶å’Œè¿›åº¦ç›‘æ§ã€‚",
    "category": "document-processing",
    "tags": ["è®ºæ–‡æ•´åˆ", "å…¨å±€å®¡æ ¸", "ä¸€è‡´æ€§æ£€æŸ¥", "å¤šæ ¼å¼è¾“å‡º", "è´¨é‡æ§åˆ¶"]
  }
}